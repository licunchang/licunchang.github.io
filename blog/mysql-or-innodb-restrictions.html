<!DOCTYPE html>
<html lang="zh-cmn-Hans-CN">
<head>
<meta charset="utf-8" />
<meta name="keywords" content="PHP,SQL,MYSQL,LICUNCHANG,LNMP,CENTOS,NGINX">
<meta name="description" content="MySQL 和 InnoDB 中的一些最大值/最小值限制
 - licunchang.com">
<meta property="og:type" content="article" />
<meta property="og:title" content="MySQL 和 InnoDB 中的一些最大值/最小值限制
" />
<meta property="og:url" content="http://licunchang.com/blog/mysql-or-innodb-restrictions.html" />
<meta property="og:description" content="MySQL 和 InnoDB 中的一些最大值/最小值限制
 - licunchang.com" />
<title>MySQL 和 InnoDB 中的一些最大值/最小值限制
</title>
<link rel="stylesheet" href="http://licunchang.com/css/reset.css" />
<link rel="stylesheet" href="http://licunchang.com/css/text.css" />
<link rel="stylesheet" href="http://licunchang.com/css/960_12_col.css" />
<link rel="stylesheet" href="http://licunchang.com/css/demo.css" />
<link rel="stylesheet" href="http://licunchang.com/css/markdown.css" />
</head>
<body>
<div class="container_12">
	<div class="grid_12">
    	<div class="header">
        	<a href="http://licunchang.com/">LiCunchang</a>
        </div>
    </div>
    <div class="clear"></div>
    <!-- end .header -->
    
    <div class="grid_12">
        <div class="nav">
            <ul>
                <li><a href="http://licunchang.com/">Home</a></li>
                <li><a href="http://licunchang.com/about.html">About</a></li>
            </ul>
            <div class="clear"></div>
        </div>
    </div>
    <div class="clear"></div>
    <!-- end .nav -->

    <div class="grid_12">
        <div class="blog">
            <h1>MySQL 和 InnoDB 中的一些最大值/最小值限制
</h1>
            <hr />
            <blockquote>
  <p>不要将 MySQL 系统中 mysql 数据库中的系统表从 myisam 引擎 升级到 InnoDB</p>
  
  <p>在 NFS 设备上不推荐使用 InnoDB 引擎来存储数据或者日志文件</p>
</blockquote>

<h2>最大值 &amp; 最小值</h2>

<ul>
<li>MySQL 对数据库数量没有限制，不过，操作系统的文件系统可能对文件夹的数目有限制</li>
<li>MySQL 对数据库表的数量也没有限制，同样的，操作系统的文件系统可能对文件的数据有限制，而 InnoDB 引擎最多限制 40 亿表</li>
<li>InnoDB 引擎单表最多能有 1000 个字段，而 MySQL 对单表字段数的最大硬限制是 4096 个，具体的最大值依赖很多其他因素</li>
<li>InnoDB 引擎单表最多能有 64 个二级索引</li>
<li>默认情况下，InnoDB 引擎单一字段索引的长度最大为 767 字节(TODO:为什么是767？)，同样的，前缀索引也有同样的限制。当使用 UTF-8 字符集，每一个字符使用 3 字节来存储，在 TEXT 或者 VARCHAR 类型的字段上建立一个超过 255 字符数的前缀索引时就会遇到问题。你可以启用服务器选项 <code>innodb_large_prefix</code> 使得这个限制增加到 3072 字节(TODO:为什么是3072？)，而且表的 row_format 需要使用 compressed 或者 dynamic</li>
<li>InnoDB 引擎内部索引最大的长度为 3500 字节，但是 MySQL 将其限制到了 3072 字节。由多个字段组成的联合主键适用这个限制</li>
<li>InnoDB 中，不考虑变长类型(VARBINARY, VARCHAR, BLOB, TEXT)InnoDB 引擎单行最大长度略小于数据页的一半，也就是 8000 字节，LONGBLOB 和 LONGTEXT 类型字段必须小于 4GB ，并且，算上 BLOB 和 TEXT 类型的字段，单行的长度必须小于 4GB 。如果一行数据大小远小于页的一半，那么行内的所有数据都存储在页中，如果超过了页的一半，变长字段则将前面768字节放在行内，剩余的放在其他页，同时存储一个20字节的长度用来记录真实的长度和剩余部分的指针</li>
<li>尽管 InnoDB 内部行的最大长度可以超过 65535 字节，但是 MySQL 将这个限制降到了 65535 字节</li>
<li>InnoDB 日志文件大小加起来不应该超过 4GB</li>
<li>InnoDB 表空间最小默认10MB，最大是数据页大小的40亿倍，也就是 64TB 这也是单表最大值。</li>
<li>InnoDB 中默认的数据库页大小是 16KB 。不建议更改数据库页的大小</li>
</ul>

<p>to be continued.</p>

<h2>References</h2>

<ol>
<li>Limits on Table Column Count and Row Size, <a href="http://dev.mysql.com/doc/refman/5.5/en/column-count-limit.html" title="Limits on Table Column Count and Row Size">http://dev.mysql.com/doc/refman/5.5/en/column-count-limit.html</a></li>
<li>Limits on InnoDB Tables, <a href="http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html">http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html</a>  </li>
</ol>
        </div>
	</div>
    <div class="clear"></div>

    <div class="grid_12">
        <div class="announce">
            <p>原创文章，转载请注明出处。</p>
        </div>
    </div>
    <div class="clear"></div>

    <div class="grid_12">
        <div class="disqus">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'licunchang';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                (function () {
                    var s = document.createElement('script'); s.async = true;
                    s.type = 'text/javascript';
                    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
                    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                }());
            </script>
            <noscript>
            Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
            </noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> 
        </div>
    </div>
    <!-- end .grid_12 -->
    <div class="clear"></div>

    <div class="grid_12">
        <div class="footer"> &copy; 2013 LiCunchang. All rights reserved.</div>
    </div>
    <!-- end .grid_12 --> 
</div>
<!-- end .container_12 --> 
<!-- JiaThis Button BEGIN -->
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?type=left&amp;btn=l3.gif&amp;uid=1375241479216400" charset="utf-8"></script>
<!-- JiaThis Button END -->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fce63e1ea00d8911ba91774df45e565f9' type='text/javascript'%3E%3C/script%3E"));
</script>
</body>
</html>